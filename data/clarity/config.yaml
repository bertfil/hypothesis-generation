task_name: clarity

train_data_path: ./clarity_train.json
val_data_path: ./clarity_val.json
test_data_path: ./clarity_test.json

prompt_templates:
  observations:
    multi_content: |
      Question: ${question}
      Answer: ${answer}
      Observation: The label assigned to that answer is: ${label}

  adaptive_info_prompt:
    multi_content: |
      Hypothesis ${idx}: ${hypothesis_text}
      ${observations}
    
  few_shot_prefix: |
    Here are some previous examples of clarity assessments.

  relevant_papers:
    multi_content: |
      Title: ${title}
      Key Findings: ${summary}
  
  summarize_paper:
    system: |-
      You are a helpful assistant for summarizing key findings in research papers on a given topic.
    user: |-
      Summarize the following research paper, focusing ONLY on how it defines and distinguishes different types of answer clarity.
      
      Specifically, look for definitions or characteristics of the clarity level of an answer to a question, which can be classified into three categories:
      1. Clear Reply: The answer explicitly and fully addresses the question.
      2. Ambivalent: The answer is provided but is evasive, vague, indirect, partial, or shifts the topic.
      3. Clear Non-Reply: The answerer explicitly refuses to answer, claims ignorance ("I don't know"), or asks for clarification.

      Focus on hypotheses of what characterizes the linguistic and logic-based definitions of these labels, do not include technical details in the paper. 
      Title: ${title}
      Text: 
      ${paper_text}

  initialize_with_paper_only:
    system: |-
      You are an expert linguist specializing in political discourse and pragmatics.
      Given a Question-Answer pair, you are asked to determine the Clarity Level of the answer.
      The Clarity Level has three specific classes:
      1. Clear Reply: The answer explicitly and fully addresses the question.
      2. Ambivalent: The answer is provided but is evasive, vague, indirect, partial, or shifts the topic.
      3. Clear Non-Reply: The answerer explicitly refuses to answer, claims ignorance ("I don't know"), or asks for clarification.

      You will be given a set of literature of the format:
      Title: [title]
      Key Findings: [summary]

      Based on the literature, please generate hypotheses that are useful for distinguishing a Clear Reply, Ambivalent, or Clear Non-Reply.
      Please propose ${num_hypotheses} refined hypotheses and generate them in the format of 1. [hypothesis], 2. [hypothesis], ... ${num_hypotheses}. [hypothesis].

    user: |-
      Here are some key findings from a series of research papers that might be useful for generating hypotheses:
      ${relevant_papers}

      Please generate hypotheses that help determine which of the 3 Clarity Labels applies to an answer.
      Please propose ${num_hypotheses} possible hypotheses.

      Generate them in the format of 1. [hypothesis], 2. [hypothesis], ... ${num_hypotheses}. [hypothesis]. 

      Proposed hypotheses:


  initialize_zero_shot:
    system: |-
      You are an expert linguist specializing in political discourse and pragmatics.
      Given a Question-Answer pair, you are asked to determine the Clarity Level of the answer.
      The Clarity Level has three specific classes:
      1. Clear Reply: The answer explicitly and fully addresses the question.
      2. Ambivalent: The answer is provided but is evasive, vague, indirect, partial, or shifts the topic.
      3. Clear Non-Reply: The answerer explicitly refuses to answer, claims ignorance ("I don't know"), or asks for clarification.
      
      Based on your past experiences, please generate hypotheses that are useful for distinguishing a Clear Reply, Ambivalent, or Clear Non-Reply.
      Please propose ${num_hypotheses} refined hypotheses and generate them in the format of 1. [hypothesis], 2. [hypothesis], ... ${num_hypotheses}. [hypothesis].
      
    user: |-
      Please generate hypotheses that can help determine whether an answer is a Clear Reply, Ambivalent, or Clear Non-Reply.
      Please propose ${num_hypotheses} possible hypotheses.

      Generate them in the format of 1. [hypothesis], 2. [hypothesis], ... ${num_hypotheses}. [hypothesis]. 

      Proposed hypotheses:
  
  refine_with_data:
    system: |-
      You are an expert linguist specializing in political discourse and pragmatics.
      Given a Question-Answer pair, you are asked to determine the Clarity Level of the answer.
      The Clarity Level has three specific classes:
      1. Clear Reply: The answer explicitly and fully addresses the question.
      2. Ambivalent: The answer is provided but is evasive, vague, indirect, partial, or shifts the topic.
      3. Clear Non-Reply: The answerer explicitly refuses to answer, claims ignorance ("I don't know"), or asks for clarification.
      
      Based on the observations, please generate hypotheses that are useful for distinguishing a Clear Reply, Ambivalent, or Clear Non-Reply.
      Please propose ${num_hypotheses} refined hypotheses and generate them in the format of 1. [hypothesis], 2. [hypothesis], ... ${num_hypotheses}. [hypothesis].

    user: |-
      Here are the Observations:
      ${observations}

      And here are the previous hypotheses:
      ${hypotheses}

      Please generate refined hypotheses that improve classification accuracy for the 3 clarity levels.
      Please propose ${num_hypotheses} refined hypotheses.

      Generate them in the format of 1. [hypothesis], 2. [hypothesis], ... ${num_hypotheses}. [hypothesis]. 

      Refined hypotheses:

  refine_with_literature:
    system: |-
      You are an expert linguist specializing in political discourse and pragmatics.
      Given a Question-Answer pair, you are asked to determine the Clarity Level of the answer.
      The Clarity Level has three specific classes:
      1. Clear Reply: The answer explicitly and fully addresses the question.
      2. Ambivalent: The answer is provided but is evasive, vague, indirect, partial, or shifts the topic.
      3. Clear Non-Reply: The answerer explicitly refuses to answer, claims ignorance ("I don't know"), or asks for clarification.

      You will be given a set of literature of the format:
      Title: [title]
      Key Findings: [summary]

      Based on the literature, please generate hypotheses that are useful for distinguishing a Clear Reply, Ambivalent, or Clear Non-Reply.
      Please propose ${num_hypotheses} refined hypotheses and generate them in the format of 1. [hypothesis], 2. [hypothesis], ... ${num_hypotheses}. [hypothesis].

    user: |-
      Here are some key findings from a series of research papers that might be useful for generating hypotheses:
      ${relevant_papers}

      And here are the previous hypotheses:
      ${hypotheses}

      Please generate refined hypotheses regarding the 3 Clarity Levels.
      Please propose ${num_hypotheses} refined hypotheses.

      Generate them in the format of 1. [hypothesis], 2. [hypothesis], ... ${num_hypotheses}. [hypothesis]. 

      Refined hypotheses:


  batched_generation:
    system: |-
      You are an expert linguist specializing in political discourse and pragmatics.
      Given a Question-Answer pair, you are asked to determine the Clarity Level of the answer.
      The Clarity Level has three specific classes:
      1. Clear Reply: The answer explicitly and fully addresses the question.
      2. Ambivalent: The answer is provided but is evasive, vague, indirect, partial, or shifts the topic.
      3. Clear Non-Reply: The answerer explicitly refuses to answer, claims ignorance ("I don't know"), or asks for clarification.
      You will be given a set of observations  of the format:
      Question: [question]
      Answer: [answer]
      Observation: [label]
      The Labels belong to the taxonomy: Clear Reply, Ambivalent, Clear Non-Reply.

      Based on the observations, please generate hypotheses that are useful for distinguishing a Clear Reply, Ambivalent, or Clear Non-Reply.
      Please propose ${num_hypotheses} possible hypotheses and generate them in the format of 1. [hypothesis], 2. [hypothesis], ... ${num_hypotheses}. [hypothesis].

    user: |-
      Here are the Observations:
      ${observations}

      Please generate hypotheses that can help determine the clarity label.
      Please propose ${num_hypotheses} possible hypotheses.

      Generate them in the format of 1. [hypothesis], 2. [hypothesis], ... ${num_hypotheses}. [hypothesis]. 

      Proposed hypotheses:

  IO_refine_with_feedback:
    system: |-
      You are an expert linguist specializing in political discourse and pragmatics.
      Given a Question-Answer pair, you are asked to determine the Clarity Level of the answer.
      The Clarity Level has three specific classes:
      1. Clear Reply: The answer explicitly and fully addresses the question.
      2. Ambivalent: The answer is provided but is evasive, vague, indirect, partial, or shifts the topic.
      3. Clear Non-Reply: The answerer explicitly refuses to answer, claims ignorance ("I don't know"), or asks for clarification.

      Your goal is to refine your hypotheses for the 3 Clarity Levels.
      For example, if an answer looks relevant but is labeled "Ambivalent", hypothesize what specific linguistic feature (e.g., addressing only half the question, shifting the subject) caused that label.
      
      Please propose ${num_hypotheses} refined hypotheses and generate them in the format of 1. [hypothesis], 2. [hypothesis], ... ${num_hypotheses}. [hypothesis].
    user: |-
      Applying your rule to the following inputs does not produce the expected outputs.
      Here's your proposed hypothesis: ${hypothesis_text}
      Below are some examples that you predicted wrong using the hypothesis.
      ${observations}
      Please generate new hypotheses that map the given inputs to their corresponding outputs (Clear Reply, Ambivalent, Clear Non-Reply).
      Propose ${num_hypotheses} possible hypotheses. Generate them in the format of 1. [hypothesis], 2. [hypothesis], ... ${num_hypotheses}. [hypothesis].
      
  batched_generation_with_paper:
    system: |-
      You are an expert linguist specializing in political discourse and pragmatics.
      Given a Question-Answer pair, you are asked to determine the Clarity Level of the answer.
      The Clarity Level has three specific classes:
      1. Clear Reply: The answer explicitly and fully addresses the question.
      2. Ambivalent: The answer is provided but is evasive, vague, indirect, partial, or shifts the topic.
      3. Clear Non-Reply: The answerer explicitly refuses to answer, claims ignorance ("I don't know"), or asks for clarification.

      You will be given a set of observations and literature of the format:
      Question: [question]
      Answer: [answer]
      Observation: [label]
      or
      Title: [title]
      Key Findings: [summary]
      The Labels belong to the taxonomy: Clear Reply, Ambivalent, Clear Non-Reply.
      
      Based on the observations and literature, please generate hypotheses that are useful for distinguishing a Clear Reply, Ambivalent, or Clear Non-Reply.
      Please propose ${num_hypotheses} possible hypotheses and generate them in the format of 1. [hypothesis], 2. [hypothesis], ... ${num_hypotheses}. [hypothesis].

    user: |-
      Here are the Observations:
      ${observations}

      Here are some key findings from a series of research papers that might be useful for generating hypotheses:
      ${relevant_papers}

      Please generate hypotheses that can help determine the clarity label.
      Please propose ${num_hypotheses} possible hypotheses.

      Generate them in the format of 1. [hypothesis], 2. [hypothesis], ... ${num_hypotheses}. [hypothesis]. 

      Proposed hypotheses:

  initialize_hypotheses_only_paper:
    system: |-
      You are an expert linguist specializing in political discourse and pragmatics.
      Given a Question-Answer pair, you are asked to determine the Clarity Level of the answer.
      The Clarity Level has three specific classes:
      1. Clear Reply: The answer explicitly and fully addresses the question.
      2. Ambivalent: The answer is provided but is evasive, vague, indirect, partial, or shifts the topic.
      3. Clear Non-Reply: The answerer explicitly refuses to answer, claims ignorance ("I don't know"), or asks for clarification.

      You will be given a set of literature of the format:
      Title: [title]
      Key Findings: [summary]
      Based on the literature, please generate hypotheses that explain the linguistic patterns that distinguish a Clear Reply, Ambivalent, or Clear Non-Reply.
      Please propose ${num_hypotheses} refined hypotheses and generate them in the format of 1. [hypothesis], 2. [hypothesis], ... ${num_hypotheses}. [hypothesis].
      
    user: |-
      Here are some key findings from a series of research papers that might be useful for generating hypotheses:
      ${relevant_papers}

      Please generate hypotheses that can help determine the Clarity Level.
      Please propose ${num_hypotheses} possible hypotheses.

      Generate them in the format of 1. [hypothesis], 2. [hypothesis], ... ${num_hypotheses}. [hypothesis]. 

      Proposed hypotheses:

  few_shot_baseline:
    system: |-
      You are an expert linguist specializing in political discourse and pragmatics.
      Given a Question-Answer pair, you are asked to determine the Clarity Level of the answer.
      The Clarity Level has three specific classes:
      1. Clear Reply: The answer explicitly and fully addresses the question.
      2. Ambivalent: The answer is provided but is evasive, vague, indirect, partial, or shifts the topic.
      3. Clear Non-Reply: The answerer explicitly refuses to answer, claims ignorance ("I don't know"), or asks for clarification.
      
      Give your final answer in the format of "Final answer: [label]". 

    user: |-
      ${few_shot_prefix}${observations}
      Determine the clarity label for the following:
      Question: ${question}
      Answer: ${answer}
      Give your final answer in the format of "Final answer: [answer]".

  boost_specificity:
    system: |-
      You are an expert linguist specializing in political discourse and pragmatics.
      Given a Question-Answer pair, you are asked to determine the Clarity Level of the answer.
      The Clarity Level has three specific classes:
      1. Clear Reply: The answer explicitly and fully addresses the question.
      2. Ambivalent: The answer is provided but is evasive, vague, indirect, partial, or shifts the topic.
      3. Clear Non-Reply: The answerer explicitly refuses to answer, claims ignorance ("I don't know"), or asks for clarification.

      From past experiences, you learned a hypothesis for determining the clarity label (Clear Reply, Ambivalent, Clear Non-Reply).
      Now you need to refine the hypothesis by rephrasing the pattern or adding examples to it so it can be more specific and easier to be used.
      Make the hypothesis more specific by analyzing *why* an answer falls into that category (e.g., identifying specific evasion techniques like deflection or generalities that make it Ambivalent).
      
      Generate the refined hypothesis in the format of 1. [hypothesis].
    user: |-
      This is the hypothesis to be refined:
      ${hypotheses}
      Please refine the hypothesis by rephrasing the pattern or adding examples to it so it can be more specific and easier to be used to determine the Clarity Level (Clear Reply, Ambivalent, Clear Non-Reply.
      Generate the refined hypothesis in the format of 1. [hypothesis].
      Refined hypothesis:

  inference:
    system: |-
      You are an expert linguist specializing in political discourse and pragmatics.
      Given a Question-Answer pair, you are asked to determine the Clarity Level of the answer.
      The Clarity Level has three specific classes:
      1. Clear Reply: The answer explicitly and fully addresses the question.
      2. Ambivalent: The answer is provided but is evasive, vague, indirect, partial, or shifts the topic.
      3. Clear Non-Reply: The answerer explicitly refuses to answer, claims ignorance ("I don't know"), or asks for clarification.
      
      From past experiences, you learned a pattern.
      Now, at each time, you should apply the learned pattern to a new pair of Question and Answer and determine the Clarity Level of the answer.
      Please give your final answer in the format of "Final answer: [answer]".

    user: |-
      Learned pattern: ${hypothesis}
      Given the pattern you learned above, determine the Clarity Level (Clear Reply, Ambivalent, Clear Non-Reply) for the following:
      Question: ${question}
      Answer: ${answer}

      Only answer if the pattern above can be applied.
      Think step by step.
      Step 1: Think about whether the pattern can be applied to this Q&A pair.
      Step 2: Analyze the relationship between Question and Answer.
      Step 3: Based on the pattern, what is the label?
      You MUST give your final answer in the format of "Final answer: [answer]".

  multiple_hypotheses_inference:
    system: |-
      You are an expert linguist specializing in political discourse and pragmatics.
      Given a Question-Answer pair, you are asked to determine the Clarity Level of the answer.
      The Clarity Level has three specific classes:
      1. Clear Reply: The answer explicitly and fully addresses the question.
      2. Ambivalent: The answer is provided but is evasive, vague, indirect, partial, or shifts the topic.
      3. Clear Non-Reply: The answerer explicitly refuses to answer, claims ignorance ("I don't know"), or asks for clarification.
      
      From past experiences, you learned a pattern.
      Now, at each time, you should apply the learned pattern to a new pair of Question and Answer and determine the Clarity Level of the answer.
      Please give your final answer in the format of {Final answer: [label]}
    user: |-
      Our learned patterns: ${hypotheses}                          
      Given the patterns you learned above, determine the Clarity Level (Clear Reply, Ambivalent, Clear Non-Reply) for the following:
      Question: ${question}
      Answer: ${answer}

      Think step by step.
      Step 1: Think about which learned patterns can be applied to the Q&A pair.
      Step 2: Analyze the relationship between Question and Answer.
      Step 3: Based on the patterns, what is the label?
      You MUST give your final answer in the format of "Final answer: [answer]".

  check_hypothesis_pair_repetition:
    system: |-
      You are an expert linguist specializing in political discourse and pragmatics.
      Given a Question-Answer pair, you are asked to determine the Clarity Level of the answer.
      The Clarity Level has three specific classes:
      1. Clear Reply: The answer explicitly and fully addresses the question.
      2. Ambivalent: The answer is provided but is evasive, vague, indirect, partial, or shifts the topic.
      3. Clear Non-Reply: The answerer explicitly refuses to answer, claims ignorance ("I don't know"), or asks for clarification.

      From past experiences, you learned some patterns.
      You need to determine if the two hypotheses are so similar to the level of "repeating hypotheses".
      Finally, answer "yes" if the two hypotheses are repetitive and "no" if they are not.
      Keep your answer short.
      Give your final answer in the format of "Final answer: [answer]".
    user: |-
      We have two hypotheses that need you to determine if they are repetitive:
      ${hypotheses}
      Are these two hypotheses so similar to the level that they are repetitive? If the both of them can provide significantly more information than only one of them could, and the information is important and useful for explaining why the answer is considered to be the clarity label (Clear Reply, Ambivalent, Clear Non-Reply).
      Note that adding specific examples does not count as "provide significantly more information".
      Give a short explanation of your decision.
      Then give your final answer in the format of "Final answer: [answer]".
      Your answer:
